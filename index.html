<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Office Log</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Retro Typewriter Font -->
<link href="https://fonts.googleapis.com/css2?family=Special+Elite&display=swap" rel="stylesheet">

<style>
:root {
    --bg: #000;
    --card: #f4f4f4;
    --ink: #111;
    --border: #ddd;
}

* {
    box-sizing: border-box;
}

body {
    margin: 0;
    height: 100vh;
    background: var(--bg);
    font-family: monospace;
    color: var(--ink);
}

/* PAGE TITLE */
.page-title {
    position: fixed;
    top: 18px;
    width: 100%;
    text-align: center;
    font-family: monospace;
    color: #f4f4f4;
    font-size: 22px;
    letter-spacing: 2px;
    display: flex;
    flex-direction: row;
    justify-content: center;
}

.page-title p{
margin: 0 0 0 33px;
align-self: center;
}

/* STATUS TEXT */
.status-text {
    position: fixed;
    width: 68%;
    top: 374px;
    left: 50%;
    transform: translate(-50%, -50%);
    background: var(--card);
    color: var(--ink);
    padding: 14px 26px;
    border-radius: 18px;
    border: 1px solid var(--border);
    font-size: 17px;
    letter-spacing: 1px;
    text-align: center;
}

/* TOP BAR */
.history-bar {
    position: relative;
    top: 275px;
    width: 100%;
    text-align: center;
    z-index: 10;
}

.history-bar button {
    font-family: inherit;
    background: var(--card);
    border: 1px solid var(--border);
    padding: 12px 22px;
    border-radius: 14px;
    font-size: 13px;
}

/* CLOCK */
.widget {
    position: fixed;
    top: 83px;
    left: 50%;
    transform: translateX(-50%);
}

.box {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 18px;
    padding: 14px 18px;
}

.clock {
    display: flex;
    gap: 10px;
    align-items: center;
}

/* SMALL DOTTED CLOCK */
.digit {
    display: grid;
    grid-template-columns: repeat(5, 6px);
    grid-template-rows: repeat(7, 6px);
    gap: 3px;
}

.dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: transparent;
}

.dot.on {
    background: var(--ink);
}

.colon {
    display: grid;
    grid-template-rows: repeat(7, 6px);
    gap: 3px;
}

.colon .dot:nth-child(3),
.colon .dot:nth-child(5) {
    background: var(--ink);
}

.space {
    width: 10px;
}

/* BOTTOM ACTION BAR */
.bottom-bar {
    position: fixed;
    bottom: 54px;
    width: 100%;
    display: flex;
    gap: 10px;
    padding: 12px;
    background: var(--bg);
}

.bottom-bar button {
    flex: 1;
    padding: 26px 32px;
    font-size: 18px;
    font-family: inherit;
    border-radius: 16px;
    border: none;
    background: var(--card);
}

.bottom-bar button:disabled {
    opacity: 0.35;
}

/* HISTORY MODAL */
.modal {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.7);
    display: none;
    z-index: 20;
}

.modal-content {
    background: var(--card);
    margin: 12% auto;
    padding: 16px;
    border-radius: 18px;
    width: 92%;
    max-height: 75%;
    overflow-y: auto;
}

.modal-content h3 {
    margin-top: 0;
    text-align: center;
}

.history-item {
    background: #fff;
    border-radius: 14px;
    padding: 12px;
    margin-bottom: 10px;
    font-size: 13px;
    line-height: 1.5;
}

.dateAndShiftTime {
    position: fixed;
    top: 195px;
    width: 100%;
    text-align: center;
    font-family: monospace;
    color: #a09fa7;
    font-size: 18px;
    letter-spacing: 1px;
    display: flex;
    flex-direction: column;
    gap:12px;
}

.date{
    font-size: 23px;
}

.img-container {
    position: fixed;
    top: 473px;
    width: 107%;
    text-align: center;
    margin-top: 10px;
    z-index: 15;
}

.img-container img {
    width: 280px; /* adjust size as needed */
    height: auto;
}

.computer-img-container{
    text-align: center;
    z-index: 15;
    height: 44px;
}


.computer-img-container img{
    width: 44px; /* adjust size as needed */
    height: auto;
}

.entryTimeContainer {
    position: fixed;
    top: 416px;
    left: 50%;
    transform: translateX(-50%);
    background: #2c2d2f;
    color: #c3c3c3;
    border-radius: 18px;
    font-size: 17px;
    letter-spacing: 1px;
    text-align: center;
    width: 382px;
    z-index: 12;
    display: flex;
    flex-direction: row;
    justify-content: center;
    padding: 17px;
    gap: 10px;
}

.entryTimeContainer p{
   margin: 0 0 0 33px;
align-self: center; 
}

.entryTimeContainer div{
    color: #63bc9e;
}


</style>
</head>

<body>

<div class="page-title"><p>OFFICE LOG</p> <!-- Add this inside <body>, above the .page-title div -->
<div class="computer-img-container">
    <img src="https://png.pngtree.com/png-vector/20231214/ourmid/pngtree-code-one-thousand-two-four-programmers-day-old-computer-vintage-computer-png-image_11353578.png" alt="computer" />
</div>
</div>
<div class="status-text" id="statusText">Click enter to Log ‚¨áÔ∏è</div>

<div class="widget">
    <div class="box">
        <div class="clock" id="clock"></div>
    </div>
</div>

<div class="history-bar">
    <button onclick="toggleHistory()">HISTORY</button>
</div>

<div class="dateAndShiftTime">
<div class="date"></div>
<div class="shift">Shift: 01:30 PM - 10:30 PM</div>
</div>

<div class="entryTimeContainer">
    <p>Entry time :</p>  <div class="entryTime"></div>
</div>

<div class="bottom-bar">
    <button id="enterBtn" onclick="enterOffice()">ENTER</button>
    <button id="exitBtn" onclick="exitOffice()" disabled>EXIT</button>
</div>

<div class="modal" id="historyModal" onclick="toggleHistory()">
    <div class="modal-content" onclick="event.stopPropagation()">
        <h3>OFFICE LOG ü™™</h3>
        <div id="historyList"></div>
    </div>
</div>

<!-- Add this inside <body>, above the .page-title div -->
<div class="img-container">
    <img src="https://png.pngtree.com/png-vector/20230811/ourmid/pngtree-cartoon-typewriter-cartoon-symbol-vector-illustration-background-png-image_6842029.png" alt="Typewriter" />
</div>



<script>
/* ===== CLOCK GLYPHS ===== */
const GLYPHS = {
"0":["11111","10001","10001","10001","10001","10001","11111"],
"1":["00100","01100","00100","00100","00100","00100","01110"],
"2":["11111","00001","00001","11111","10000","10000","11111"],
"3":["11111","00001","00001","01111","00001","00001","11111"],
"4":["10001","10001","10001","11111","00001","00001","00001"],
"5":["11111","10000","10000","11111","00001","00001","11111"],
"6":["11111","10000","10000","11111","10001","10001","11111"],
"7":["11111","00001","00010","00100","00100","00100","00100"],
"8":["11111","10001","10001","11111","10001","10001","11111"],
"9":["11111","10001","10001","11111","00001","00001","11111"],
"A":["01110","10001","10001","11111","10001","10001","10001"],
"P":["11110","10001","10001","11110","10000","10000","10000"],
"M":["10001","11011","10101","10101","10001","10001","10001"]
};

function createGlyph(char) {
    if (char === ":") {
        const c = document.createElement("div");
        c.className = "colon";
        for (let i = 0; i < 7; i++) {
            c.appendChild(document.createElement("div")).className = "dot";
        }
        return c;
    }
    if (char === " ") {
        const s = document.createElement("div");
        s.className = "space";
        return s;
    }
    const d = document.createElement("div");
    d.className = "digit";
    GLYPHS[char].forEach(row =>
        row.split("").forEach(bit => {
            const dot = document.createElement("div");
            dot.className = "dot" + (bit === "1" ? " on" : "");
            d.appendChild(dot);
        })
    );
    return d;
}

function updateClock() {
    const clock = document.getElementById("clock");
    clock.innerHTML = "";
    const now = new Date();
    let h = now.getHours();
    const m = String(now.getMinutes()).padStart(2, "0");
    const ap = h >= 12 ? "PM" : "AM";
    h = h % 12 || 12;
    [...`${String(h).padStart(2,"0")}:${m} ${ap}`]
        .forEach(ch => clock.appendChild(createGlyph(ch)));
}
updateClock();
setInterval(updateClock, 1000);

/* ===== OFFICE LOGIC ===== */
const today = new Date().toISOString().split("T")[0];
let officeData = JSON.parse(localStorage.getItem("officeData") || "[]");

function formatTime(date) {
    return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
}

// New function to format date as "13-Jan-2026"
function formatDateDMY(dateStr) {
    const d = new Date(dateStr);
    const day = d.getDate();
    const month = d.toLocaleString('en-US', { month: 'short' });
    const year = d.getFullYear();
    return `${day}-${month}-${year}`;
}

function enterOffice() {
    localStorage.setItem("todayEnter", Date.now());
    localStorage.setItem("officeStatus", "IN");
    document.getElementById("enterBtn").disabled = true;
    document.getElementById("exitBtn").disabled = false;
    document.getElementById("statusText").innerText = "üü¢ You are IN office";
}

function exitOffice() {
    const enter = new Date(parseInt(localStorage.getItem("todayEnter")));
    const exit = new Date();
    const mins = Math.floor((exit - enter) / 60000);
    const hrs = String(Math.floor(mins / 60)).padStart(2, "0");
    const rem = String(mins % 60).padStart(2, "0");

    officeData.push({
        date: today,
        enter: formatTime(enter),
        exit: formatTime(exit),
        total: `${hrs}:${rem}`
    });

    localStorage.setItem("officeData", JSON.stringify(officeData));
    localStorage.removeItem("todayEnter");
    localStorage.setItem("officeStatus", "OUT");

    document.getElementById("exitBtn").disabled = true;
    document.getElementById("statusText").innerText = "Click enter to Log ‚¨áÔ∏è";
}

function toggleHistory() {
    const modal = document.getElementById("historyModal");
    modal.style.display = modal.style.display === "block" ? "none" : "block";
    renderHistory();
}

function renderHistory() {
    const list = document.getElementById("historyList");
    list.innerHTML = "";
    officeData.slice().reverse().forEach(d => {
        list.innerHTML += `
            <div class="history-item">
                DATE : ${formatDateDMY(d.date)}<br>
                ENTER: ${d.enter}<br>
                EXIT : ${d.exit}<br>
                TOTAL: ${d.total}
            </div>`;
    });
}

function enterOffice() {
    const now = new Date();
    localStorage.setItem("todayEnter", now.getTime());
    localStorage.setItem("officeStatus", "IN");
    
    document.getElementById("enterBtn").disabled = true;
    document.getElementById("exitBtn").disabled = false;
    document.getElementById("statusText").innerText = "üü¢ You are IN office";

    // Show entry time
    const entryDiv = document.querySelector(".entryTimeContainer");
    document.querySelector(".entryTime").innerText = formatTime(now);
}


// Show today's date in the "date-MMM-year" format
document.querySelector('.date').innerText = formatDateDMY(today);

/* RESTORE STATE */
const status = localStorage.getItem("officeStatus") || "OUT";
document.getElementById("statusText").innerText =
    status === "IN" ? "üü¢ You are IN office" : "Click enter to Log ‚¨áÔ∏è";

if (status === "IN") {
    document.getElementById("enterBtn").disabled = true;
    document.getElementById("exitBtn").disabled = false;

    const enterTime = new Date(parseInt(localStorage.getItem("todayEnter")));
    const entryDiv = document.querySelector(".entryTimeContainer");
    document.querySelector(".entryTime").innerText = formatTime(enterTime);
}
</script>

</body>
</html>
